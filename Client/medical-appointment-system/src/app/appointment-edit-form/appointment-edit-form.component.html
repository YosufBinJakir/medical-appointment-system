<div class="modal-body" *ngIf="editForm">
  <form [formGroup]="editForm" (ngSubmit)="onSubmit()">

    <!-- Doctor -->
    <label>Doctor</label>
    <select formControlName="doctorId" class="form-control">
      <option *ngFor="let d of doctors" [value]="d.doctorId">
        {{ d.doctorName }}
      </option>
    </select>

    <!-- Patient -->
    <label>Patient</label>
    <select formControlName="patientId" class="form-control">
      <option *ngFor="let p of patients" [value]="p.patientId">
        {{ p.patientName }}
      </option>
    </select>

 
 <label>Visit Type</label>
 <div class="form-check">
   <input class="form-check-input" type="radio" formControlName="visitType" value="First Visit" id="visitNew">
   <label class="form-check-label" for="visitNew">First Visit</label>
 </div>
 <div class="form-check">
   <input class="form-check-input" type="radio" formControlName="visitType" value="Follow-Up" id="visitFollowup">
   <label class="form-check-label" for="visitFollowup">Follow-Up</label>
 </div>
 
    <!-- Notes -->
    <label>Notes</label>
    <textarea formControlName="notes" class="form-control"></textarea>

    <!-- Diagnosis -->
    <label>Diagnosis</label>
    <input formControlName="diagnosis" class="form-control" />

    <!-- Appointment Date -->
    <label>Appointment Date</label>
    <input type="datetime-local" formControlName="appointDate" class="form-control" />

    <hr />

    <!-- Prescription Details -->
    <div formArrayName="prescriptionDetails">
      <div *ngFor="let pres of prescriptionDetails.controls; let i = index" [formGroupName]="i" class="border p-2 mb-2 rounded">

        <label>Medicine</label>
        <select formControlName="medicineId" class="form-control">
          <option *ngFor="let m of medicines" [value]="m.medicineId">
            {{ m.medicineName }}
          </option>
        </select>

        <label>Dosage</label>
        <input formControlName="dosage" class="form-control" />

        <label>Notes</label>
        <input formControlName="notes" class="form-control" />

        <label>Start Date</label>
        <input type="date" formControlName="startDate" class="form-control" />

        <label>End Date</label>
        <input type="date" formControlName="endDate" class="form-control" />

        <button type="button" class="btn btn-danger btn-sm mt-2" (click)="removePrescription(i)">
          Remove
        </button>
      </div>
    </div>

    <button type="button" class="btn btn-secondary btn-sm" (click)="addPrescription()">+ Add Prescription</button>

    <div class="mt-3">
      <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>
  </form>
</div>
